<!DOCTYPE html>
<html>
<head>
	<title>NZ's free backcountry huts</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="libs/leaflet-0.7.2/leaflet.css" />
	<link rel="stylesheet" type="text/css" href="index.css" />
	<link rel="stylesheet" type="text/css" href="leaflet-src.css" />
    
	
	
	
</head>
<body>
	<div id="map" style="width: 100%; height: 100%"></div>
	
	<script type="text/javascript" src="libs/leaflet-0.7.2/leaflet-src.js"></script>
	
	
	<script>

		var map = L.map('map', {
		center: [52.5, 13.4],
		zoom: 10
		});
		
		var OSM = L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
			maxZoom: 18,	
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="http://mapbox.com">Mapbox</a>',
			id: 'tip-beuth.km61n1no'
		});
		OSM.addTo(map);
		
		var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
					maxZoom: 18,
					attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});
		
		
            
		var bedIcon = L.icon({
        iconUrl: 'bed.png',
           
        iconSize:     [38, 45], // size of the icon
        shadowSize:   [50, 64], // size of the shadow
        iconAnchor:   [22, 54], // point of the icon which will correspond to marker's location
        shadowAnchor: [12, 86],  // the same for the shadow
        popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
        });
		
		
		var huts = new L.LayerGroup();
		
		L.marker([-42.434892, 171.730555],{icon: bedIcon}).bindPopup("<b>Jim's Flat Hut</b><br />4 Betten, Ofenheizung, Toilette, Gas, Strom, Wassertank.").addTo(huts),
			
		L.marker([-42.705937, 171.561224],{icon: bedIcon}).bindPopup("<b>Camp Creek Hut</b><br />6 Betten, Ofeheizung, Toilette, Wassertank.").addTo(huts),
			
		L.marker([-42.293355, 171.391854],{icon: bedIcon}).bindPopup("<b>Croesus Top Hut</b><br />3 Betten, Heizung, Toilette, Feuerstelle.").addTo(huts),

		L.marker([-42.663576, 171.709333],{icon: bedIcon}).bindPopup("<b>Lake Morgan Hut</b><br />6 Betten.").addTo(huts),
			
		L.marker([-42.324441, 172.339621],{icon: bedIcon}).bindPopup("<b>Pell Stream Hut</b><br />4 Betten, Ofenheizung, Toilette.").addTo(huts),
			
		L.marker([-42.614289, 171.83714],{icon: bedIcon}).bindPopup("<b>Waikiti Hut</b><br />6 Betten, Feuerstelle.").addTo(huts),
		
		L.marker([-41.60634, 172.197552],{icon: bedIcon}).bindPopup("<b>Goat Creek Hut</b><br />4 Betten, Feuerstelle, Ofenheizung.").addTo(huts),
			
		L.marker([-41.238318, 172.275831],{icon: bedIcon}).bindPopup("<b>Greys Hut</b><br />6 Betten, Ofenheizung.").addTo(huts),	
			
		L.marker([-41.33237, 172.30395],{icon: bedIcon}).bindPopup("<b>Kakapo Hut</b><br />4 Betten, Ofenheizung.").addTo(huts),	
		
		L.marker([-42.928146, 171.198489],{icon: bedIcon}).bindPopup("<b>Boo Boo Hut</b><br />4 Betten, Toilette, Ofenheizung.").addTo(huts),
			
		L.marker([-43.158109, 170.849824],{icon: bedIcon}).bindPopup("<b>County Stream Hut</b><br />6 Betten, Wassertank, Toilette.").addTo(huts),
		
		L.marker([-43.003624, 170.93465],{icon: bedIcon}).bindPopup("<b>Explorer Hut</b><br />4 Betten, Heizung, toilette, Wassertank.").addTo(huts),
        
		L.marker([-43.031729, 171.11084],{icon: bedIcon}).bindPopup("<b>Frisco Hut</b><br />4 Betten, toilette.").addTo(huts),
		
		L.marker([-43.348328, 170.48217],{icon: bedIcon}).bindPopup("<b>Nolans Hut</b><br />4 Betten, Heizung, Toilette.").addTo(huts),
			
		L.marker([-43.922923, 169.689232],{icon: bedIcon}).bindPopup("<b>Creswicke Flat Hut</b><br />4 Betten, Heizung.").addTo(huts),
			
		L.marker([-43.823714, 169.455463],{icon: bedIcon}).bindPopup("<b>Middle Head Hut</b><br />6 Betten, Heizung, Toilette, Wassertank.").addTo(huts),

		L.marker([-44.165568, 168.311149],{icon: bedIcon}).bindPopup("<b>Spoon Hut</b><br />4 Betten.").addTo(huts),
		
		L.marker([-44.489066, 167.943009],{icon: bedIcon}).bindPopup("<b>Kaipo Hut</b><br />6 Betten, Ofenheizung.").addTo(huts),
			
		L.marker([-45.048274, 167.307881],{icon: bedIcon}).bindPopup("<b>Caswell Sound Hut</b><br />4 Betten, Ofenheizung, nur mit Boot erreichbar.").addTo(huts),

		L.marker([-45.525483, 167,263147],{icon: bedIcon}).bindPopup("<b>West Arm Hut</b><br />6 Betten.").addTo(huts),
			
		L.marker([-46.142993, 166.629289],{icon: bedIcon}).bindPopup("<b>Landing Shed Hut</b><br />7 Betten, nur mit Boot erreichbar.").addTo(huts),
			
		L.marker([-46.123294, 166.672102],{icon: bedIcon}).bindPopup("<b>Te Oneroa A-frame Hut</b><br />2 Betten, nur mit Boot erreichbar.").addTo(huts);
		
		var baseMaps = {
		"OSM": OSM,
		"Satellite": Esri_WorldImagery		
		};
		
		var overlays = {
			"Hütten": huts
		};

		L.control.layers(baseMaps, overlays).addTo(map);
		
		
		
		var popup = L.popup();

		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("Koordinaten an dieser Stelle " + e.latlng.toString())
				.openOn(map);
		}

		map.on('click', onMapClick);
		
		function onLocationFound(e) {
			 var radius = parseInt( e.accuracy / 2);

			L.marker(e.latlng).addTo(map)
				.bindPopup("You are within " + radius + " meters from this point").openPopup();

			L.circle(e.latlng, radius).addTo(map);
		}

		function onLocationError(e) {
			alert(e.message);
		}

		map.on('locationfound', onLocationFound);
		map.on('locationerror', onLocationError);

		map.locate({setView: true, maxZoom: 16});

    </script>
</body>
</html>